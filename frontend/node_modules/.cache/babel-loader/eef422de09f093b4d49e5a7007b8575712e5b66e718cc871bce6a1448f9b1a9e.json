{"ast":null,"code":"var _jsxFileName = \"/home/lenovo/IdeaProjects/lets-chat/frontend/src/components/chat/AllUsers.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { createChatRoom } from \"../../services/ChatService\";\nimport Contact from \"./Contact\";\nimport UserLayout from \"../layouts/UserLayout\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction classNames(...classes) {\n  return classes.filter(Boolean).join(\" \");\n}\nexport default function AllUsers({\n  users,\n  chatRooms,\n  setChatRooms,\n  onlineUsersId,\n  currentUser,\n  changeChat\n}) {\n  _s();\n  const [selectedChat, setSelectedChat] = useState();\n  const [nonContacts, setNonContacts] = useState([]);\n  const [contactIds, setContactIds] = useState([]);\n  useEffect(() => {\n    const Ids = chatRooms.map(chatRoom => {\n      return chatRoom.members.find(member => member !== currentUser.uid);\n    });\n    setContactIds(Ids);\n  }, [chatRooms, currentUser.uid]);\n  useEffect(() => {\n    setNonContacts(users.filter(f => f.uid !== currentUser.uid && !contactIds.includes(f.uid)));\n  }, [contactIds, users, currentUser.uid]);\n  const changeCurrentChat = (index, chat) => {\n    setSelectedChat(index);\n    changeChat(chat);\n  };\n  const handleNewChatRoom = async user => {\n    const members = {\n      senderId: currentUser.uid,\n      receiverId: user.uid\n    };\n    const res = await createChatRoom(members);\n    setChatRooms(prev => [...prev, res]);\n    changeChat(res);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"overflow-auto h-[30rem]\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"my-2 mb-2 ml-2 text-gray-900 dark:text-white\",\n        children: \"Chats\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        children: chatRooms.map((chatRoom, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classNames(index === selectedChat ? \"bg-gray-100 dark:bg-gray-700\" : \"transition duration-150 ease-in-out cursor-pointer bg-white border-b border-gray-200 hover:bg-gray-100 dark:bg-gray-900 dark:border-gray-700 dark:hover:bg-gray-700\", \"flex items-center px-3 py-2 text-sm \"),\n          onClick: () => changeCurrentChat(index, chatRoom),\n          children: /*#__PURE__*/_jsxDEV(Contact, {\n            chatRoom: chatRoom,\n            onlineUsersId: onlineUsersId,\n            currentUser: currentUser\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"my-2 mb-2 ml-2 text-gray-900 dark:text-white\",\n        children: \"Other Users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        children: nonContacts.map((nonContact, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center px-3 py-2 text-sm bg-white border-b border-gray-200 hover:bg-gray-100 dark:bg-gray-900 dark:border-gray-700 dark:hover:bg-gray-700 cursor-pointer\",\n          onClick: () => handleNewChatRoom(nonContact),\n          children: /*#__PURE__*/_jsxDEV(UserLayout, {\n            user: nonContact,\n            onlineUsersId: onlineUsersId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(AllUsers, \"nOpmJsG2X14GAgAws51I/5kXRa4=\");\n_c = AllUsers;\nvar _c;\n$RefreshReg$(_c, \"AllUsers\");","map":{"version":3,"names":["useState","useEffect","createChatRoom","Contact","UserLayout","jsxDEV","_jsxDEV","Fragment","_Fragment","classNames","classes","filter","Boolean","join","AllUsers","users","chatRooms","setChatRooms","onlineUsersId","currentUser","changeChat","_s","selectedChat","setSelectedChat","nonContacts","setNonContacts","contactIds","setContactIds","Ids","map","chatRoom","members","find","member","uid","f","includes","changeCurrentChat","index","chat","handleNewChatRoom","user","senderId","receiverId","res","prev","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","nonContact","_c","$RefreshReg$"],"sources":["/home/lenovo/IdeaProjects/lets-chat/frontend/src/components/chat/AllUsers.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\nimport { createChatRoom } from \"../../services/ChatService\";\nimport Contact from \"./Contact\";\nimport UserLayout from \"../layouts/UserLayout\";\n\nfunction classNames(...classes) {\n  return classes.filter(Boolean).join(\" \");\n}\n\nexport default function AllUsers({\n  users,\n  chatRooms,\n  setChatRooms,\n  onlineUsersId,\n  currentUser,\n  changeChat,\n}) {\n  const [selectedChat, setSelectedChat] = useState();\n  const [nonContacts, setNonContacts] = useState([]);\n  const [contactIds, setContactIds] = useState([]);\n\n  useEffect(() => {\n    const Ids = chatRooms.map((chatRoom) => {\n      return chatRoom.members.find((member) => member !== currentUser.uid);\n    });\n    setContactIds(Ids);\n  }, [chatRooms, currentUser.uid]);\n\n  useEffect(() => {\n    setNonContacts(\n      users.filter(\n        (f) => f.uid !== currentUser.uid && !contactIds.includes(f.uid)\n      )\n    );\n  }, [contactIds, users, currentUser.uid]);\n\n  const changeCurrentChat = (index, chat) => {\n    setSelectedChat(index);\n    changeChat(chat);\n  };\n\n  const handleNewChatRoom = async (user) => {\n    const members = {\n      senderId: currentUser.uid,\n      receiverId: user.uid,\n    };\n    const res = await createChatRoom(members);\n    setChatRooms((prev) => [...prev, res]);\n    changeChat(res);\n  };\n\n  return (\n    <>\n      <ul className=\"overflow-auto h-[30rem]\">\n        <h2 className=\"my-2 mb-2 ml-2 text-gray-900 dark:text-white\">Chats</h2>\n        <li>\n          {chatRooms.map((chatRoom, index) => (\n            <div\n              key={index}\n              className={classNames(\n                index === selectedChat\n                  ? \"bg-gray-100 dark:bg-gray-700\"\n                  : \"transition duration-150 ease-in-out cursor-pointer bg-white border-b border-gray-200 hover:bg-gray-100 dark:bg-gray-900 dark:border-gray-700 dark:hover:bg-gray-700\",\n                \"flex items-center px-3 py-2 text-sm \"\n              )}\n              onClick={() => changeCurrentChat(index, chatRoom)}\n            >\n              <Contact\n                chatRoom={chatRoom}\n                onlineUsersId={onlineUsersId}\n                currentUser={currentUser}\n              />\n            </div>\n          ))}\n        </li>\n        <h2 className=\"my-2 mb-2 ml-2 text-gray-900 dark:text-white\">\n          Other Users\n        </h2>\n        <li>\n          {nonContacts.map((nonContact, index) => (\n            <div\n              key={index}\n              className=\"flex items-center px-3 py-2 text-sm bg-white border-b border-gray-200 hover:bg-gray-100 dark:bg-gray-900 dark:border-gray-700 dark:hover:bg-gray-700 cursor-pointer\"\n              onClick={() => handleNewChatRoom(nonContact)}\n            >\n              <UserLayout user={nonContact} onlineUsersId={onlineUsersId} />\n            </div>\n          ))}\n        </li>\n      </ul>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}