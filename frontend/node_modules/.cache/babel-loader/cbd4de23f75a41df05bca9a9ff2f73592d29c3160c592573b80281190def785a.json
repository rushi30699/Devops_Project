{"ast":null,"code":"import axios from \"axios\";\nimport auth from \"../config/firebase\";\nimport { io } from \"socket.io-client\";\nconst baseURL = \"http://localhost:3001/api\";\nconst getUserToken = async () => {\n  const user = auth.currentUser;\n  const token = user && (await user.getIdToken());\n  return token;\n};\nexport const initiateSocketConnection = async () => {\n  const token = await getUserToken();\n  const socket = io(\"http://localhost:3001\", {\n    auth: {\n      token\n    }\n  });\n  return socket;\n};\nconst createHeader = async () => {\n  const token = await getUserToken();\n  const payloadHeader = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  };\n  return payloadHeader;\n};\nexport const getAllUsers = async () => {\n  const header = await createHeader();\n  try {\n    const res = await axios.get(`${baseURL}/user`, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\nexport const getUser = async userId => {\n  const header = await createHeader();\n  try {\n    const res = await axios.get(`${baseURL}/user/${userId}`, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\nexport const getUsers = async users => {\n  const header = await createHeader();\n  try {\n    const res = await axios.get(`${baseURL}/user/users`, users, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\nexport const getChatRooms = async userId => {\n  const header = await createHeader();\n  try {\n    const res = await axios.get(`${baseURL}/room/${userId}`, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\nexport const getChatRoomOfUsers = async (firstUserId, secondUserId) => {\n  const header = await createHeader();\n  try {\n    const res = await axios.get(`${baseURL}/room/${firstUserId}/${secondUserId}`, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\nexport const createChatRoom = async members => {\n  const header = await createHeader();\n  try {\n    const res = await axios.post(`${baseURL}/room`, members, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\nexport const getMessagesOfChatRoom = async chatRoomId => {\n  const header = await createHeader();\n  try {\n    const res = await axios.get(`${baseURL}/message/${chatRoomId}`, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\nexport const sendMessage = async messageBody => {\n  const header = await createHeader();\n  try {\n    const res = await axios.post(`${baseURL}/message`, messageBody, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};","map":{"version":3,"names":["axios","auth","io","baseURL","getUserToken","user","currentUser","token","getIdToken","initiateSocketConnection","socket","createHeader","payloadHeader","headers","Authorization","getAllUsers","header","res","get","data","e","console","error","getUser","userId","getUsers","users","getChatRooms","getChatRoomOfUsers","firstUserId","secondUserId","createChatRoom","members","post","getMessagesOfChatRoom","chatRoomId","sendMessage","messageBody"],"sources":["/home/lenovo/IdeaProjects/lets-chat/frontend/src/services/ChatService.js"],"sourcesContent":["import axios from \"axios\";\nimport auth from \"../config/firebase\";\nimport { io } from \"socket.io-client\";\n\nconst baseURL = \"http://localhost:3001/api\";\n\nconst getUserToken = async () => {\n  const user = auth.currentUser;\n  const token = user && (await user.getIdToken());\n  return token;\n};\n\nexport const initiateSocketConnection = async () => {\n  const token = await getUserToken();\n\n  const socket = io(\"http://localhost:3001\", {\n    auth: {\n      token,\n    },\n  });\n\n  return socket;\n};\n\nconst createHeader = async () => {\n  const token = await getUserToken();\n\n  const payloadHeader = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n  };\n  return payloadHeader;\n};\n\nexport const getAllUsers = async () => {\n  const header = await createHeader();\n\n  try {\n    const res = await axios.get(`${baseURL}/user`, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const getUser = async (userId) => {\n  const header = await createHeader();\n\n  try {\n    const res = await axios.get(`${baseURL}/user/${userId}`, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const getUsers = async (users) => {\n  const header = await createHeader();\n\n  try {\n    const res = await axios.get(`${baseURL}/user/users`, users, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const getChatRooms = async (userId) => {\n  const header = await createHeader();\n\n  try {\n    const res = await axios.get(`${baseURL}/room/${userId}`, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const getChatRoomOfUsers = async (firstUserId, secondUserId) => {\n  const header = await createHeader();\n\n  try {\n    const res = await axios.get(\n      `${baseURL}/room/${firstUserId}/${secondUserId}`,\n      header\n    );\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const createChatRoom = async (members) => {\n  const header = await createHeader();\n\n  try {\n    const res = await axios.post(`${baseURL}/room`, members, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const getMessagesOfChatRoom = async (chatRoomId) => {\n  const header = await createHeader();\n\n  try {\n    const res = await axios.get(`${baseURL}/message/${chatRoomId}`, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const sendMessage = async (messageBody) => {\n  const header = await createHeader();\n\n  try {\n    const res = await axios.post(`${baseURL}/message`, messageBody, header);\n    return res.data;\n  } catch (e) {\n    console.error(e);\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}